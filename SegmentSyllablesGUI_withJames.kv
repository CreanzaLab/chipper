#:import MeshLinePlot kivy.garden.graph.MeshLinePlot
#:import np numpy

<CustomLabel@Label>
    color: 1, 1, 1, 1

<ControlPanel>:
    id: controls
    orientation: "horizontal"
    spacing: 10
    padding: 10

    GridLayout:
        rows: 2
        cols: 1
        spacing: 20
        padding: 5
        size_hint_x: .1

        Slider:
            id: slider_high_pass_filter
            orientation: 'vertical'
            min: 400
            max: 513
            value: 400
            step: 1
            on_value: controls.update(root.sonogram, int(slider_high_pass_filter.value), slider_threshold.value, slider_min_silence.value, slider_min_syllable.value)
            #value_track: True
        CustomLabel:
            text: str(int(slider_high_pass_filter.value))


    GridLayout:
        id: graphs
        rows: 2
        cols: 1
        spacing: 20
        padding: 10

        GridLayout:
            id: graph_sonogram
            rows: 1
            cols: 1
            value: controls.image_sonogram(controls.sonogram)
#        Graph:
#            id: graph_sonogram
        GridLayout:
            id: graph_binary
            rows: 1
            cols: 1

    GridLayout:
        rows: 4
        cols: 1
        spacing: 20
        padding: 20
        size_hint_x: .5

        GridLayout:
            rows: 3
            cols: 1
            spacing: 5
            padding: 5

            CustomLabel:
                text: 'Threshold: Top Percent of Signal'
            Slider:
                id: slider_threshold
                min: 98
                max: 100
                value: 99
                step: 0.1
                on_value: controls.update(root.sonogram, slider_high_pass_filter.value, slider_threshold.value, slider_min_silence.value, slider_min_syllable.value)
            CustomLabel:
                text: str(slider_threshold.value)

        GridLayout:
            rows: 3
            cols: 1
            spacing: 5
            padding: 5

            CustomLabel:
                text: 'Minimum Silence Duration'
            Slider:
                id: slider_min_silence
                min: 1
                max: 20
                value: 10
                step: 0.5
                on_value: controls.update(root.sonogram, slider_high_pass_filter.value, slider_threshold.value, slider_min_silence.value, slider_min_syllable.value)
            CustomLabel:
                text: str(slider_min_silence.value)

        GridLayout:
            rows: 3
            cols: 1
            spacing: 5
            padding: 5

            CustomLabel:
                text: 'Minimum Syllable Duration'
            Slider:
                id: slider_min_syllable
                min: 10
                max: 30
                value: 20
                step: 0.5
                on_value: controls.update(root.sonogram, slider_high_pass_filter.value, slider_threshold.value, slider_min_silence.value, slider_min_syllable.value)
            CustomLabel:
                text: str(slider_min_syllable.value)

        GridLayout:
            rows: 2
            cols: 1
            spacing: 10
            padding: 10

            Button:
                id: button_submit
                text: 'SUBMIT'
                on_press: controls.image_sonogram(controls.sonogram)

            Button:
                id: button_toss
                text: 'TOSS'
                on_press: controls.image2()


